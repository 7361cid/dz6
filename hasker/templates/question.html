{% extends 'base.html' %}

{% block title %}Create question{% endblock %}
{% block content %}
<table>
        <tr>
            <td class="table_column">
                <a id="logo" href="/"><img src="/media/images/logo.png" alt="Whitesquare logo"></a>
            </td>
            <td class="table_column">
            </td>
        </tr>
</table>
{% endblock %}

{% block user %}
<table>
    <tr>
        <td class="table_column">
                {% if user.is_authenticated %}
                    {% if user.profile_pic %}
                        <img src="{{ user.profile_pic.url }}" height=35 width=35>
                    {% endif %}
                  <div class="login"><a href="{% url 'logout' %}"><img src="/media/images/logout.png" alt="Whitesquare logo"></a>  <a href="{% url 'user' pk=user.pk %}">Your page </a></div>
                {% else %}
                  <div class="login"><a id="logout" href="{% url 'login' %}">Log In</a> <button onclick="window.location.href = '{% url 'signup' %}';">Sign up</button></div>
                {% endif %}
        </td>
    </tr>
</table>
{% endblock %}

{% block content_center %}
    <table>
        <tr>
            <td>
                <h2 class="question">{{ question.title }}</h2>
            </td>
        </tr>
        <tr>
            <td>
                {% if user.is_authenticated %}
                    <form action="vote_for_question/" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="vote" value="{{ True }}"/>
                        <button class="button" type="submit" > + </button>
                    </form>
                    <h2 class="question">{{ question.rating }}</h2>
                    <form action="vote_for_question/" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="vote" value="{{ False }}" />
                        <button class="button" type="submit" > - </button>
                    </form>
                {% endif %}
            </td>
            <td>
                <div>{{ question.content }}</div>
            </td>
        </tr>
        <tr>
            <td>
                <p><a href="{% url 'home' tag=question.tag %}">{{ question.tag }}</a></p>
            </td>
            {% if q.tag2 %}
                <p><button onclick="window.location.href = '{% url 'home' tag=q.tag2 %}';">{{ question.tag2 }}</button></p>
            {% endif %}
            {% if q.tag3 %}
                <p><button onclick="window.location.href = '{% url 'home' tag=q.tag3 %}';">{{ question.tag3 }}</button></p>
            {% endif %}
            <td>
                <p><a href="{% url 'user' pk=question.author.pk %}">{{ question.author }}</a></p>
            </td>
            <td>
                <img src="{{ question.author.profile_pic.url }}" height=40 width=40>
            </td>
        </tr>
    </table>

    {% for a in paginator.object_list %}
    <table>
            <tr>
                {% if a.right %}
                    <td>
                        <p class="right_answer">üëë</p>
                    </td>
                {% endif %}
                <td>
                    <form action="vote_for_answer/{{ a.pk }}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="vote" value="{{ True }}"/>
                        <button class="button" type="submit" > + </button>
                    </form>
                    <p>{{ a.rating }}</p>
                    <form action="vote_for_answer/{{ a.pk }}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="vote" value="{{ False }}" />
                        <button class="button" type="submit" > - </button>
                    </form>
                </td>
                <td>
                    <p>{{ a.content }}</p>
                </td>
            </tr>
            <tr>
                <td>
                    <p><a href="{% url 'user' pk=a.author.pk %}">{{ a.author }}</a></p>
                </td>
                <td>
                    <img src="{{ a.author.profile_pic.url }}" height=40 width=40>
                </td>
            </tr>
            {% if user == question.author %}
            <a href="make_answer_right/{{ answer.id }}">
            <button> This answer is right? </button>
            </a>
            {% endif %}
        <hr>
    </table>
    {% endfor %}

    <ul class="pagination">
                    {% if paginator.has_previous %}
                        <li>
                            <span><a href="/blog/question_list/{{ question.pk }}/{{ paginator.previous_page_number }}">Previous</a></span>
                        </li>
                    {% endif %}
                        <li class="pagination">
                            <span>Page {{ paginator.number }} of {{ paginator.paginator.num_pages }}.</span>
                        </li>
                    {% if paginator.has_next %}
                        <li class="pagination">
                            <span><a href="/blog/question_list/{{ question.pk }}/{{ paginator.next_page_number }}">Next</a></span>
                        </li>
                    {% endif %}
    </ul>

    {% if request.user.is_authenticated %}
        <p> –í–∞—à –æ—Ç–≤–µ—Ç </p>
        <form action="" method="post"> {% csrf_token %}
        {{ form.as_p }}
            <input type="submit" value="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
        </form>
    {% endif %}

<table>
    {% for q in  questions_trends  %}
    <tr>
        <td class="table_question_data">
            <div class="invisible">–¥–ª—è —Ä–∞—Å—Ç—è–∂–µ–Ω–∏—è –±–ª–æ–∫–∞</div>
        </td>
    </tr>
        <tr> <td class="table_question_data">
            <div class="invisible">–¥–ª—è —Ä–∞—Å—Ç—è–∂–µ–Ω–∏—è –±–ª–æ–∫–∞</div>
        </td>
    </tr>
  {% endfor %}
  </table>

{% endblock %}


{% block sidebar %}
{% if request.user.is_authenticated %}
    <p><button onclick="window.location.href = '{% url 'question_new' %}';">Ask!</button></p>
{% else %}
    <p><button onclick="window.location.href = '{% url 'login' %}';">Ask!</button></p>
{% endif %}
<h1> Trending </h1>
<table class="table_questions">
  {% for q in  questions_trends  %}
    <tr>
        <td class="table_question_data">
            <p><button onclick="window.location.href = '{% url 'question' pk=q.id %}';">{{ q.rating }}</button></p>
        </td>
        <td class="table_question_data">
            <p>{{ q.title }}</p>
        </td>
    </tr>
  {% endfor %}
</table>
{% endblock %}